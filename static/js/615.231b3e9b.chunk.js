"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[615],{5615:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f,emptyProductInitial:()=>v});var a=i(5043),n=i(4221),o=i(3216),r=i(2719),s=i(6444);const c=(0,s.Ay)({name:(0,s.j2)(),quantity:(0,s.UJ)(),price:(0,s.UJ)(),description:(0,s.F7)(),colors:(0,s.Tf)(),sizes:(0,s.Tf)()});var l=i(3003),d=i(5026),u=i(778);const m=()=>{const e=(0,l.wA)();return{colorsMenu:(0,l.d4)((e=>e.selectMenuReducer)).colors.data,getColorsMenu:()=>{e((0,u.cT)(!0)),d.A.get("/api/select_menu/colors").then((t=>{e((0,u.kC)(t.data.data))})).finally((()=>e((0,u.cT)(!1))))}}};var p=i(6581),g=i(579);const h=(0,a.lazy)((()=>Promise.all([i.e(454),i.e(560),i.e(440)]).then(i.bind(i,2440)))),v={name:"",quantity:1,price:1,description:"",colors:[],sizes:[],image:""},f=()=>{const{getOneProductLogic:e,updateProductLogic:t,storeProductLogic:i,oneProduct:s}=(0,n.A)(),{getColorsMenu:l,colorsMenu:d}=m(),{id:u}=(0,o.g)(),[f,b]=(0,a.useState)(null),y=void 0!==u,A=(0,r.eA)({initialValues:y?{name:s.name,quantity:s.quantity,price:s.price,colors:s.colors||[],description:s.description||"",sizes:s.sizes||[],image:""}:v,validationSchema:c,onSubmit:e=>{e.colors=(0,p.kW)(e.colors),console.log(e),e.image=f;const a=new FormData;for(const t in e)console.log("key is",t),["colors","sizes"].includes(t)?(console.log("iam here"),e[t].map(((e,i)=>{a.append("".concat(t,"[").concat(i,"]"),e)}))):null!==e[t]&&a.append(t,e[t]);y?t(a,u,(0,r.fe)(A)):i(a,(0,r.fe)(A))}});(0,a.useEffect)((()=>{!async function(){await l(),y&&await e(u)}()}),[]),console.log("formik",A,d);const{handleChange:w,handleSubmit:S,handleBlur:k,values:q,errors:j,isValid:E,isSubmitting:O,setFieldValue:P,resetForm:V}=A;return(0,g.jsx)(h,{inUpdate:y,data:{colorsMenu:d},setImage:b,formikObject:{handleBlur:k,handleChange:w,handleSubmit:S,values:q,errors:j,isSubmitting:O,isValid:E,setFieldValue:P,resetForm:V}})}},4221:(e,t,i)=>{i.d(t,{A:()=>d});var a=i(3003),n=i(3216),o=i(6272),r=i(1655),s=i(5026),c=i(2812),l=i(2719);const d=()=>{const e=(0,a.wA)(),t=(0,n.Zp)(),i=(0,a.d4)((e=>e.productReducer)),d=i.all.data,u=i.all.meta,m=i.show,p=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t=void 0===t?(0,o.Ac)():t,e((0,r.ki)(!0)),s.A.get("/api/admin/products",{params:t}).then((t=>{e((0,r.Md)(t.data.data)),e((0,r.Fl)(t.data.meta))})).finally((()=>e((0,r.ki)(!1))))};return{all:d,meta:u,oneProduct:m,getAllProductsLogic:p,storeProductLogic:(e,i)=>{const{setSubmitting:a}=i;a(!0),s.A.postForm("/api/admin/products",e).then((()=>t(c.A.TABLE))).catch((e=>(0,l.dM)(e.response.data,i))).finally((()=>a(!1)))},updateProductLogic:(e,i,a)=>{const{setSubmitting:n}=a;n(!0),s.A.postForm("/api/admin/products/".concat(i),e).then((()=>t(c.A.TABLE))).catch((e=>(0,l.dM)(e.response.data,a))).finally((()=>n(!1)))},deleteProductLogic:e=>{s.A.delete("/api/admin/products/".concat(e)).then((()=>p()))},getOneProductLogic:t=>{e((0,r.ki)(!0)),s.A.get("/api/admin/products/".concat(t)).then((t=>{e((0,r.e9)(t.data.data))})).finally((()=>e((0,r.ki)(!1))))}}}},2719:(e,t,i)=>{i.d(t,{fe:()=>p,dM:()=>m,eA:()=>u});var a=i(3892),n=i(5173),o=i.n(n);const r=e=>{let{initialValues:t,validationSchema:i,onSubmit:a,overrideConfig:n}=e;return{initialValues:t,validateOnBlur:!0,validateOnChange:!1,validateOnMount:!1,enableReinitialize:!0,validationSchema:i,onSubmit:a,...n}};r.propTypes={initialValues:o().object,validationSchema:o().object.isRequired,onSubmit:o().func.isRequired};const s=r;var c=i(6762),l=i(5431),d=i(9546);const u=e=>{const t=s(e);return(0,a.Wx)(t)},m=(e,t)=>{if(e.code!==c.c.VALIDATION_ERRORS)return;console.log("iam here");const{initialValues:i,setErrors:a}=t,n=Object.keys(i),o={};n.forEach((t=>{void 0!==e.data[t]&&(o[t]=e.data[t])})),(0,d.XY)(o)||a(o);const r=Object.keys(e.data);for(let s=0;s<r.length;s++)if(!n.includes(r[s])){l.A.error(e.data[r[s]]);break}},p=e=>({setErrors:e.setErrors,initialValues:e.initialValues,setSubmitting:e.setSubmitting});u.propTypes={initialValues:o().object,validationSchema:o().object.isRequired,onSubmit:o().func.isRequired,overrideConfig:o().object}},6272:(e,t,i)=>{i.d(t,{Ac:()=>n,CV:()=>o,OE:()=>r,ZG:()=>a});const a=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";for(const[i,a]of Object.entries(e))t=t.replace(":".concat(i),a);return t};function n(){const e=new URLSearchParams(window.location.search),t=new Set;e.forEach(((e,i)=>{t.add(i)}));const i=Array.from(t),a=new URLSearchParams;return i.forEach((t=>a.append(t,e.get(t)))),a}const o=e=>{const t="".concat(window.location.pathname,"?").concat(e);window.history.pushState({path:t},"",t)},r=()=>{history.back()}},6581:(e,t,i)=>{i.d(t,{_6:()=>a,kW:()=>n});const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"id",newId:"value",name:"name",newName:"label"};return e.map((e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"id",newId:"value",name:"name",newName:"label"};const i={...e};return void 0===e[t.newId]&&void 0!==e[t.id]&&(i[t.newId]=i[t.id],delete i[t.id]),void 0===e[t.newName]&&void 0!==e[t.name]&&(i[t.newName]=e[t.name],delete i[t.name]),i}(e,t)))},n=e=>Array.isArray(e)?e.map((e=>void 0===e.value?e.id:e.value)):void 0===e.value?e.value:e.id},6444:(e,t,i)=>{i.d(t,{Tf:()=>m,Ay:()=>p,w_:()=>s,UJ:()=>u,F7:()=>l,Fv:()=>d,j2:()=>c});var a=i(899);const n=e=>e instanceof File,o={file:(e,t)=>!!n(e)||t("field must be a valid file"),image:(e,t)=>{var i;console.log(e,e.size,e.type);const a=(null===e||void 0===e||null===(i=e.type)||void 0===i?void 0:i.split("/")[0])||null;return!(!n(e)||"image"!==a)||t({message:"field must be an image"})}},r=(e,t)=>{var i;return t&&Object.keys(t).forEach((i=>{t[i]?delete e[i]:e[i]=t[i]})),null===(i=Object.values(e))||void 0===i?void 0:i.filter((e=>!!e))},s=e=>r({string:"string",required:"required",email:"email",trim:"trim"},e),c=e=>r({string:"string",required:"required",max:"max:255",trim:"trim"},e),l=e=>c({max:null,...e}),d=e=>r({string:"string",required:"required",min:"min:8",trim:"trim"},e),u=e=>r({number:"number",required:"required",min:"min:1"},e),m=e=>r({array:"array",required:"required"},e),p=e=>{let t=a.object().shape({});return Object.entries(e).forEach((e=>{let[i,n]=e;if(n){let e=a;n.forEach((t=>{const[i,...a]=t.split(":");e=void 0!==o[i]?e.test(i,"error",((e,t)=>{let{createError:n}=t;return o[i](e,n,...a)})):e[i](...a)})),t=t.shape({[i]:e})}})),t}}}]);
//# sourceMappingURL=615.231b3e9b.chunk.js.map